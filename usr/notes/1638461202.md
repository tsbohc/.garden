alpine server

boot menu and uefi setup is on F11

# TODO

qbittorrent-nox config now!

NOTE
it doesn't matter if mpd on the server is online first or second, or if any one of them goes down, they will connect/reconnect automagically

put a note somewhere where mpd starts that the server is assumed to be disabled

move hori to .garden/etc/ and make it look in that folder for dots

the up arrow history search could probably be simplified, look into that reddit post

for vi, just install vim, you've already made a minimal vimrc for colemak

## post install

```
/etc/ssh/sshd_config
---
PasswordAuthentication no
Match Address 192.168.0.0/24
  PasswordAuthentication yes
```

adduser <username>

uncomment community /etc/apk/repositories

explicitly installed packages are in /etc/apk/world

### hori

chsh is in apk add shadow

## cron

```
# crontab -u username -e
---
@reboot /home/tsbohc/.garden/bin/startup
```

### resetting ssh

ssh-keygen -R <ip>

## automounting a drive

```
# mkdir /mnt/<point>
# lsblk
# blkid
```

```
/etc/fstab
---
UUID=<uuid>  /mnt/<point>  <fs-type>  defaults  0 2
```

```
# mount -a
```

for the storage drive particularly:

```
mkdir /data
```


## permissions

recursively take ownership:

chown -R <username> folder

## nfs

apk add nfs-utils

rc-update add nfs
rc-service nfs start

```
/etc/exports
---
/<mount> <ip>/<subnet-mask>(rw,sync,all_squash,anonuid=1000,anongid=1000,insecure,no_subtree_check)
```

restart service and/or # exportfs -rav

the secure default blocks access from ports <1024 (or so) because they are reserved to root

uid and gid have to match the output of

id -u <username>
id -g <username>

### mounting

```
# mount -t nfs <ip>:<share> <mount-point>
```

## qbittorrent-nox

this repo has builds (used by guillaumedsde/alpine-qbittorrent-openvpn)

https://github.com/userdocs/qbittorrent-nox-static/releases/

else just build it yourself

example:

wget "https://github.com/userdocs/qbittorrent-nox-static/releases/download/release-4.4.2_v2.0.6/x86_64-qbittorrent-nox" -O /usr/bin/qbittorrent-nox
chmod +x /usr/bin/qbittorrent-nox

### blank torrent list

zoom in (as in, ctrl-plus or ctrl-scrollwheel), it's probably only a visual bug

## docker

apk add docker docker-compose
addgroup <username> docker

rc-update add docker boot
service docker start

make sure the docker-compose.yaml is in ~/ and start from there:

sudo docker-compose up

https://wiki.gentoo.org/wiki/Docker#OpenRC
- also, the gentoo page has notes on permissions

## samba

note: *smb has a bug since 2015 which fucks mpd and many other things*

apk add samba

config is in /etc/samba/smb.conf

```
[data]
follow symlinks = yes
browseable = yes
writeable = yes
path = /<point>
```

smbpasswd -a <username>

rc-update add samba
rc-service samba start

while connecting, use smb://<ip>/data
